(()=>{"use strict";var t,n,r=(t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)},function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}),e=(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}r(n,t)}(Error),function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r(n,t),n}(Error)),o=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r(n,t),n}(Error),i=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r(n,t),n}(Error),u=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r(n,t),n}(Error),a=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r(n,t),n}(Error),l=function(t){if(Array.isArray(t))return t[0];if("string"==typeof t)return t;throw new u("invalid path: "+t+", path as json: "+JSON.stringify(t))},s=function(t,n){if(!t)return t;var r=n.shift();return n.length?s(t[r],n):r?t[r]:t},c=function(t,n){if(!t||"object"!=typeof t)return t;var r=function(t){return t.split(".")}(n);return s(t,r)};!function(t){t.count="COUNT"}(n||(n={}));var f=function(t,n){try{return new Intl.PluralRules(n).select(t)}catch(t){if("Intl is not defined"===t.message)throw new o("plural by default is not supported. Try to add a polyfill for Intl: https://formatjs.io/docs/polyfills/intl-pluralrules/ or you should to pass a pluralRecord with own functions for plural");throw t}},p=function(t,n){var r=new RegExp("\\${"+n.key+"}","g");return t.replace(r,n.value)},h=function(){function t(){}return t.prototype.set=function(t,n){var r=n.pluralFn,e=void 0===r?f:r,o=n.locale,i=n.path,u=l(void 0===i?"":i);return this._content=c(t,u),this.locale=o,this.pluralFn=e,this},t.prototype.setVariables=function(t){if(!t||"object"!=typeof t)return this;if("string"!=typeof this._content)throw new i('invalid content: "'+this._content+'"; as a json: '+JSON.stringify(this._content));for(var n=this._content,r=Object.keys(t),e=0;e<r.length;e++){var o=r[e];n=p(n,{key:o,value:t[o]})}return this._content=n,this},t.prototype.setCount=function(t){return t||0===t?(this._content=p(function(t){var n=t.count,r=t.content,o=t.pluralFn,u=t.locale;if(!r||"object"!=typeof r)throw new e('content is not plural. content: "'+r+'"; as a json: '+JSON.stringify(r));var a=r[o(n,u)];if("string"!=typeof a)throw new i("invalid translate. Translated result: "+a+"; as a json: "+JSON.stringify(a));return a}({count:t,content:this._content,pluralFn:this.pluralFn,locale:this.locale}),{key:n.count,value:t.toString()}),this):this},Object.defineProperty(t.prototype,"content",{get:function(){return this._content},enumerable:!1,configurable:!0}),t}(),y=function(t,n,r,e){return new(r||(r=Promise))((function(o,i){function u(t){try{l(e.next(t))}catch(t){i(t)}}function a(t){try{l(e.throw(t))}catch(t){i(t)}}function l(t){var n;t.done?o(t.value):(n=t.value,n instanceof r?n:new r((function(t){t(n)}))).then(u,a)}l((e=e.apply(t,n||[])).next())}))},v=function(t,n){var r,e,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,e&&(o=2&i[0]?e.return:i[0]?e.throw||((o=e.return)&&o.call(e),0):e.next)&&!(o=o.call(e,i[1])).done)return o;switch(e=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,e=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(t,u)}catch(t){i=[6,t],e=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};!function(){function t(){}t.prototype._setContent=function(t){return y(this,void 0,void 0,(function(){var n;return v(this,(function(r){switch(r.label){case 0:return"function"!=typeof t?[3,2]:(n=this,[4,t()]);case 1:return n.content=r.sent().default,[2];case 2:return this.content=t,[2]}}))}))},t.prototype.init=function(t){return y(this,void 0,void 0,(function(){var n,r,e,o;return v(this,(function(i){switch(i.label){case 0:return n=t.translations,r=t.locale,e=t.pluralRecord,o=n[r],this.translations=n,this.pluralRecord=e,this.locale=r,this.contentPreparer=new h,[4,this._setContent(o)];case 1:return i.sent(),[2]}}))}))},t.prototype.changeLocale=function(t){return y(this,void 0,void 0,(function(){var n,r;return v(this,(function(e){switch(e.label){case 0:return n=this.translations,r=n[t],this.locale=t,[4,this._setContent(r)];case 1:return e.sent(),[2]}}))}))},t.prototype.createTranslate=function(t){var n=this,r=l(t),e=c(this.content,r);return function(r,o){void 0===o&&(o={});var u=o.errorsMode,l=o.count,s=o.variables;return function(t,n,r){void 0===n&&(n="throw"),void 0===r&&(r="");try{return t()}catch(t){if("ignore"===n)return"";var e=new Error([""+t.message,r].filter(Boolean).join(". "));if("throw"===n)throw e;if("function"==typeof n)return n(e);throw new a('errorsMode: "'+n+'"; as a json: '+JSON.stringify(n))}}((function(){var t=n,o=t.locale,u=t.pluralRecord,a=n.contentPreparer.set(e,{path:r,locale:o,pluralFn:null==u?void 0:u[o]}).setCount(l).setVariables(s).content;if("string"==typeof a)return a;var c=n.contentPreparer.set(n.content,{path:r,locale:o,pluralFn:null==u?void 0:u[o]}).setCount(l).setVariables(s).content;if("string"==typeof c)return c;throw new i('invalid translate: "'+a+'"; as a json: '+JSON.stringify(a))}),u,'full path: "'+[t,r].filter(Boolean).join(".")+'"; translate path: "'+r+'";')}}}()})();